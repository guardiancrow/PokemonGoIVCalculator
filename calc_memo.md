# 計算式とかメモ

新しいCP計算式

2018年10月より導入されたCP計算式、ハピナスやカビゴンなど防衛に有利なポケモンが弱体化されています。

## ポケモンシリーズ→ポケモンGOの種族値へ変換

まず種族値を求めます。

種族値はおおむね最新のものを使います。多分メルタン、メルメタル以外はサン・ムーン（第七世代）のデータで足りると思います。

６つあるポケモンの種族値から３つのポケモンGOへの種族値へ変換します。

### 攻撃

goATK = round(round(2 \* (7 \* max(こうげき,とくこう) + min(こうげき,とくこう)) / 8) \* (1 + (すばやさ - 75) / 500))

### 防御

goDEF = round(round(2 \* (5 \* max(ぼうぎょ,とくぼう) + 3 \* min(ぼうぎょ,とくぼう)) / 8) \* (1 + (すばやさ - 75) / 500))

### HP

goHP = floor(HP \* 1.75 + 50)

_※右辺HPはポケモンシリーズのもの_

## 種族値からCPを得る

３つのポケモンGOの種族値を使い計算します。

CP = (攻撃 + 15) \* (防御 + 15) ^ (1 / 2) \* (HP + 15) ^ (1 / 2) \* CPM ^ 2

CPMはレベルにより変動し最大で”0.79030001”になります。

ご覧のように攻撃のみ平方根を取りません。つまり、パラメータのうち「攻撃が一番大切」というのはここからきています。

## 強いポケモンへの補正

最大がCP4000を超えるポケモンは３つの種族値が一律0.91倍されます。これらの影響を受けるのはほとんどの伝説のポケモンとケッキング・メルメタルなどです。

_私は最初1.1で除算するものだと思っていたので一部のポケモンで計算が狂っていました。_
